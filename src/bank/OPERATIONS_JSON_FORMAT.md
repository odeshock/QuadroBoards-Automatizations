# –§–æ—Ä–º–∞—Ç JSON –æ–ø–µ—Ä–∞—Ü–∏–π –±–∞–Ω–∫–∞

–ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –Ω–∞ –∫–Ω–æ–ø–∫—É "–ö—É–ø–∏—Ç—å" —Å–∏—Å—Ç–µ–º–∞ —Å–æ–±–∏—Ä–∞–µ—Ç –≤—Å—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –æ–ø–µ—Ä–∞—Ü–∏—è—Ö –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –µ—ë –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON.

---

## –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–π –∏–∑ backup

–°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–π –∏–∑ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö.

### –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –≤ `window.BACKUP_DATA` –ø–µ—Ä–µ–¥ –∑–∞–≥—Ä—É–∑–∫–æ–π –±–∞–Ω–∫–∞:
   ```javascript
   window.BACKUP_DATA = {
     fullData: [...],  // –º–∞—Å—Å–∏–≤ –æ–ø–µ—Ä–∞—Ü–∏–π
     totalSum: 150     // –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
   };
   ```

2. –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø–æ—è–≤–∏—Ç—Å—è –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –≤–æ–ø—Ä–æ—Å–æ–º:
   **"–û–±–Ω–∞—Ä—É–∂–µ–Ω—ã —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±–∞–Ω–∫–æ–≤—Å–∫—É—é –æ–ø–µ—Ä–∞—Ü–∏—é?"**

3. –í—ã–±–µ—Ä–∏—Ç–µ:
   - **–î–∞** ‚Äî –æ–ø–µ—Ä–∞—Ü–∏–∏ –±—É–¥—É—Ç –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã, –Ω–æ–≤—ã–µ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∏ –∏ —Å–∫–∏–¥–∫–∏ –ø—Ä–∏–º–µ–Ω—è—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
   - **–ù–µ—Ç** ‚Äî –¥–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç –ø—Ä–æ–∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω—ã

4. –ü–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ `window.BACKUP_DATA` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—á–∏—â–∞–µ—Ç—Å—è (—É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –≤ `undefined`)

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è

**–ß—Ç–æ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è:**
- ‚úÖ –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è **–≤—Å–µ** –æ–ø–µ—Ä–∞—Ü–∏–∏ –∏–∑ backup (type: "operation")
- ‚ùå –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∏ –∏–∑ backup **—É–¥–∞–ª—è—é—Ç—Å—è** –∏ –∑–∞–º–µ–Ω—è—é—Ç—Å—è –∞–∫—Ç—É–∞–ª—å–Ω—ã–º–∏
- ‚ùå –°–∫–∏–¥–∫–∏ –∏–∑ backup **—É–¥–∞–ª—è—é—Ç—Å—è** –∏ –∑–∞–º–µ–Ω—è—é—Ç—Å—è –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–º–∏
- ‚úÖ –í—Å–µ –ø–æ–ª—è —Ñ–æ—Ä–º –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –ø–æ–ª–Ω–æ—Å—Ç—å—é
- ‚úÖ `groupSeq` –∏ `entrySeq` –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã

**–†–µ–∂–∏–º —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è backup:**
- –ü–æ—Å–ª–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º–∞ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ —Ä–µ–∂–∏–º —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –æ–ø–µ—Ä–∞—Ü–∏–∏
- –í —ç—Ç–æ–º —Ä–µ–∂–∏–º–µ –¥–µ–π—Å—Ç–≤—É—é—Ç –∑–∞–º–æ—Ä–æ–∂–µ–Ω–Ω—ã–µ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ –ø—Ä–∞–≤–∏–ª–∞
- –†–µ–∂–∏–º –¥–µ–π—Å—Ç–≤—É–µ—Ç –¥–æ –Ω–∞–∂–∞—Ç–∏—è –∫–Ω–æ–ø–∫–∏ "–ö—É–ø–∏—Ç—å"
- –ö–Ω–æ–ø–∫–∞ "–°–±—Ä–æ—Å–∏—Ç—å" –Ω–µ –≤—ã–≤–æ–¥–∏—Ç –∏–∑ —Ä–µ–∂–∏–º–∞ - —Ç–æ–ª—å–∫–æ –æ—á–∏—â–∞–µ—Ç –æ–ø–µ—Ä–∞—Ü–∏–∏

---

## –õ–æ–≥–∏–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–æ–∫ –¥–ª—è backup (–≤–µ—á–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞)

–ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∏ **–ù–ï —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è** –∏–∑ backup. –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –∏–∑ –∫–æ–¥–∞.

### –ê–ª–≥–æ—Ä–∏—Ç–º –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è:

1. **–£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–æ–∫:**
   - –í—Å–µ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∏ –∏–∑ backup –ø–æ–ª–Ω–æ—Å—Ç—å—é —É–¥–∞–ª—è—é—Ç—Å—è
   - –ù–µ –≤–∞–∂–Ω–æ, –∫–∞–∫–∏–µ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∏ –±—ã–ª–∏ –≤ backup

2. **–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö –ø—Ä–∞–≤–∏–ª:**
   - –ü—Ä–∏–º–µ–Ω—è—é—Ç—Å—è **–í–°–ï** –ø—Ä–∞–≤–∏–ª–∞ –∏–∑ `autoPriceAdjustments` (–∏–∑ `data.js`)
   - –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ç–µ–∫—É—â–∏–µ –ø—Ä–∞–≤–∏–ª–∞ –∏–∑ –∫–æ–¥–∞, –Ω–µ –∏–∑ backup
   - –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∏ –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –æ–ø–µ—Ä–∞—Ü–∏–π

3. **–§–æ—Ä–º—É–ª–∞ —Ä–∞—Å—á—ë—Ç–∞ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∏:**
   ```
   oldPrice √ó (itemCount √∑ batchSize) √ó batchSize - newPrice √ó (itemCount √∑ batchSize)
   ```
   - –ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ `itemCount >= batchSize`
   - –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ –Ω–µ –º–æ–∂–µ—Ç –ø—Ä–µ–≤—ã—à–∞—Ç—å —Å—É–º–º—É –æ–ø–µ—Ä–∞—Ü–∏–∏

### –ü—Ä–∏–º–µ—Ä –ø—Ä–∞–≤–∏–ª –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–æ–∫:

```javascript
// data.js
export const autoPriceAdjustments = [
  {
    id: 'gift-collection-5-discount',
    title: '–ü–µ—Ä–µ—Å—á—ë—Ç –∑–∞ 5 –ø–æ–¥–∞—Ä–∫–æ–≤ –∏–∑ –∫–æ–ª–ª–µ–∫—Ü–∏–∏',
    form: '#form-gift-present',
    batchSize: 5,
    newPrice: 180  // –≤–º–µ—Å—Ç–æ 40 √ó 5 = 200
  }
];
```

**–ü—Ä–∏–º–µ—Ä —Ä–∞—Å—á—ë—Ç–∞:**
- –ü–æ–¥–∞—Ä–∫–∏ –∏–∑ –∫–æ–ª–ª–µ–∫—Ü–∏–∏: —Å—Ç–∞—Ä–∞—è —Ü–µ–Ω–∞ = 40‚Ç≤
- –ü—Ä–∏ 7 –ø–æ–¥–∞—Ä–∫–∞—Ö: `40 √ó 1 √ó 5 - 180 √ó 1 = 20‚Ç≤` (–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞)

### –ü–æ—á–µ–º—É –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∏ –≤—Å–µ–≥–¥–∞ –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ:

–ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∏ ‚Äî —ç—Ç–æ **–ø—Ä–∞–≤–∏–ª–∞ —Ü–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è**, –∫–æ—Ç–æ—Ä—ã–µ:
- –ù–µ –∏–º–µ—é—Ç –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π
- –î–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º–∏ –¥–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ú–æ–≥—É—Ç –∏–∑–º–µ–Ω—è—Ç—å—Å—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç
- –ü—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–æ –≤—Å–µ–º –æ–ø–µ—Ä–∞—Ü–∏—è–º

---

## –õ–æ–≥–∏–∫–∞ —Å–∫–∏–¥–æ–∫ –¥–ª—è backup (–∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ –ø—Ä–∞–≤–∏–ª–∞)

–°–∫–∏–¥–∫–∏ **–ù–ï —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è** –∏–∑ backup. –ü—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ –ø—Ä–∞–≤–∏–ª–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ `backup.timestamp`.

### –ê–ª–≥–æ—Ä–∏—Ç–º –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è:

1. **–£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö —Å–∫–∏–¥–æ–∫:**
   - –í—Å–µ —Å–∫–∏–¥–∫–∏ –∏–∑ backup –ø–æ–ª–Ω–æ—Å—Ç—å—é —É–¥–∞–ª—è—é—Ç—Å—è
   - –ù–µ –≤–∞–∂–Ω–æ, –∫–∞–∫–∏–µ —Å–∫–∏–¥–∫–∏ –±—ã–ª–∏ –≤ backup

2. **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö —Å–∫–∏–¥–æ–∫:**
   - –ï—Å–ª–∏ –≤ backup –µ—Å—Ç—å `timestamp` (ISO 8601), —Å–∏—Å—Ç–µ–º–∞ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∫–∞–∫–∏–µ —Å–∫–∏–¥–∫–∏ –∏–∑ `autoDiscounts` –±—ã–ª–∏ –∞–∫—Ç–∏–≤–Ω—ã –Ω–∞ —Ç–æ—Ç –º–æ–º–µ–Ω—Ç
   - –°–∫–∏–¥–∫–∞ —Å—á–∏—Ç–∞–µ—Ç—Å—è –∞–∫—Ç–∏–≤–Ω–æ–π –Ω–∞ –º–æ–º–µ–Ω—Ç backup, –µ—Å–ª–∏:
     - `backup.timestamp >= discount.startDate` (–≤ –º–æ—Å–∫–æ–≤—Å–∫–æ–º –≤—Ä–µ–º–µ–Ω–∏, 00:00:00)
     - `backup.timestamp <= discount.expiresAt` (–≤ –º–æ—Å–∫–æ–≤—Å–∫–æ–º –≤—Ä–µ–º–µ–Ω–∏, 23:59:59) –∏–ª–∏ `expiresAt` –Ω–µ —É–∫–∞–∑–∞–Ω

3. **–ó–∞–º–æ—Ä–æ–∑–∫–∞ —Å–ø–∏—Å–∫–∞ —Å–∫–∏–¥–æ–∫:**
   - –°–ø–∏—Å–æ–∫ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–∫–∏–¥–æ–∫ **–∑–∞–º–æ—Ä–∞–∂–∏–≤–∞–µ—Ç—Å—è** –≤ `frozenDiscounts`
   - –≠—Ç–æ—Ç —Å–ø–∏—Å–æ–∫ –¥–µ–π—Å—Ç–≤—É–µ—Ç **–≤—Å—ë –≤—Ä–µ–º—è** —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è backup
   - –ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏/—É–¥–∞–ª–µ–Ω–∏–∏ –æ–ø–µ—Ä–∞—Ü–∏–π –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∑–∞–º–æ—Ä–æ–∂–µ–Ω–Ω—ã–µ —Å–∫–∏–¥–∫–∏

4. **–í—ã—Ö–æ–¥ –∏–∑ —Ä–µ–∂–∏–º–∞ backup:**
   - –ó–∞–º–æ—Ä–æ–∂–µ–Ω–Ω—ã–µ —Å–∫–∏–¥–∫–∏ –¥–µ–π—Å—Ç–≤—É—é—Ç –¥–æ –Ω–∞–∂–∞—Ç–∏—è –∫–Ω–æ–ø–∫–∏ "–ö—É–ø–∏—Ç—å"
   - –ü–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å–∏—Å—Ç–µ–º–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –∫ –æ–±—ã—á–Ω–æ–º—É —Ä–µ–∂–∏–º—É

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö —Å–∫–∏–¥–æ–∫:

‚úÖ **–ü—Ä–∏–º–µ–Ω—è—é—Ç—Å—è:**
- –°–∫–∏–¥–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –∞–∫—Ç–∏–≤–Ω—ã –Ω–∞ –º–æ–º–µ–Ω—Ç `backup.timestamp`
- –î–∞–∂–µ –µ—Å–ª–∏ —Å–∫–∏–¥–∫–∞ —É–∂–µ –∏—Å—Ç–µ–∫–ª–∞ —Å–µ–π—á–∞—Å
- –î–∞–∂–µ –µ—Å–ª–∏ —Å–∫–∏–¥–∫–∞ –±—ã–ª–∞ —É–¥–∞–ª–µ–Ω–∞ –∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

‚ùå **–ù–ï –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è:**
- –°–∫–∏–¥–∫–∏, –∞–∫—Ç–∏–≤–Ω—ã–µ —Å–µ–π—á–∞—Å, –Ω–æ –ù–ï –∞–∫—Ç–∏–≤–Ω—ã–µ –Ω–∞ –º–æ–º–µ–Ω—Ç backup
- –°–∫–∏–¥–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –µ—â—ë –Ω–µ –Ω–∞—á–∞–ª–∏ –¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å –Ω–∞ –º–æ–º–µ–Ω—Ç backup

### –ü—Ä–∏–º–µ—Ä:

```javascript
// Backup –±—ã–ª —Å–æ–∑–¥–∞–Ω 15 —è–Ω–≤–∞—Ä—è 2025
backup.timestamp = "2025-01-15T12:00:00Z"

// –°–∫–∏–¥–∫–∞ –±—ã–ª–∞ –∞–∫—Ç–∏–≤–Ω–∞ 1-31 —è–Ω–≤–∞—Ä—è
discount = {
  id: 'new-year',
  startDate: '2025-01-01',
  expiresAt: '2025-01-31'
}

// –°–µ–≥–æ–¥–Ω—è 10 —Ñ–µ–≤—Ä–∞–ª—è 2025 (—Å–∫–∏–¥–∫–∞ –∏—Å—Ç–µ–∫–ª–∞)
// ‚úÖ –°–∫–∏–¥–∫–∞ –í–°–Å –†–ê–í–ù–û –ø—Ä–∏–º–µ–Ω–∏—Ç—Å—è, —Ç.–∫. –±—ã–ª–∞ –∞–∫—Ç–∏–≤–Ω–∞ –Ω–∞ –º–æ–º–µ–Ω—Ç backup
```

### –ü–æ—á–µ–º—É —Å–∫–∏–¥–∫–∏ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ:

–°–∫–∏–¥–∫–∏ ‚Äî —ç—Ç–æ **–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –∞–∫—Ü–∏–∏**, –∫–æ—Ç–æ—Ä—ã–µ:
- –ü—Ä–∏–≤—è–∑–∞–Ω—ã –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É –ø–µ—Ä–∏–æ–¥—É –≤—Ä–µ–º–µ–Ω–∏
- –î–æ–ª–∂–Ω—ã —Å–æ—Ö—Ä–∞–Ω—è—Ç—å—Å—è –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏
- –ù–µ –¥–æ–ª–∂–Ω—ã –∏–∑–º–µ–Ω—è—Ç—å—Å—è –ø—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ —Å—Ç–∞—Ä–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏
- –û—Ç—Ä–∞–∂–∞—é—Ç —É—Å–ª–æ–≤–∏—è –Ω–∞ –º–æ–º–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–∏

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö

```json
{
  "type": "PURCHASE",
  "timestamp": "2025-01-15T12:34:56.789Z",  // ISO 8601 timestamp –Ω–∞–∂–∞—Ç–∏—è "–ö—É–ø–∏—Ç—å"
  "operations": [...],     // –°—Ç–∞—Ä—ã–π —Ñ–æ—Ä–º–∞—Ç (–¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏)
  "fullData": [...],       // –ü–æ–ª–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç —Å –¥–∞–Ω–Ω—ã–º–∏ —Ñ–æ—Ä–º
  "environment": {...},    // –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
  "totalSum": 0            // –û–±—â–∞—è —Å—É–º–º–∞
}
```

### –ü–æ–ª—è –≤–µ—Ä—Ö–Ω–µ–≥–æ —É—Ä–æ–≤–Ω—è

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|----------|
| `type` | string | –¢–∏–ø —Å–æ–æ–±—â–µ–Ω–∏—è, –≤—Å–µ–≥–¥–∞ `"PURCHASE"` |
| `timestamp` | string | Timestamp –Ω–∞–∂–∞—Ç–∏—è –∫–Ω–æ–ø–∫–∏ "–ö—É–ø–∏—Ç—å" –≤ —Ñ–æ—Ä–º–∞—Ç–µ ISO 8601 (UTC) |
| `operations` | array | –°—Ç–∞—Ä—ã–π —Ñ–æ—Ä–º–∞—Ç –æ–ø–µ—Ä–∞—Ü–∏–π –∏–∑ DOM (–¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏) |
| `fullData` | array | –ü–æ–ª–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –æ–ø–µ—Ä–∞—Ü–∏–π —Å –¥–∞–Ω–Ω—ã–º–∏ –≤—Å–µ—Ö –ø–æ–ª–µ–π —Ñ–æ—Ä–º |
| `environment` | object | –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (USER_ID, IS_ADMIN, –∏ —Ç.–¥.) |
| `totalSum` | number | –û–±—â–∞—è –∏—Ç–æ–≥–æ–≤–∞—è —Å—É–º–º–∞ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π |

---

## 1. Environment (–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è)

–°–æ–¥–µ—Ä–∂–∏—Ç –≤—Å–µ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Å–∏—Å—Ç–µ–º–æ–π –±–∞–Ω–∫–∞.

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞

```json
{
  "USER_ID": "123",
  "USER_NAME": "–ò–º—è –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è",
  "IS_ADMIN": true,
  "USERS_LIST": [
    {
      "id": "123",
      "name": "–ò–º—è –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"
    }
  ],
  "PERSONAL_POSTS": [
    {
      "src": "https://...",
      "text": "–ù–∞–∑–≤–∞–Ω–∏–µ –ø–æ—Å—Ç–∞",
      "symbols_num": 1500
    }
  ],
  "PLOT_POSTS": [...],
  "ADS_POSTS": [...],
  "FIRST_POST_FLAG": false,
  "FIRST_POST_MISSED_FLAG": false,
  "BANNER_RENO_FLAG": false,
  "BANNER_MAYAK_FLAG": false,
  "ALLOWED_PARENTS": ["https://example.com"],
  "BASE_URL": "https://example.com"
}
```

### –û–ø–∏—Å–∞–Ω–∏–µ –ø–æ–ª–µ–π

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|----------|
| `USER_ID` | string | ID —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| `USER_NAME` | string | –ò–º—è —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| `IS_ADMIN` | boolean | –Ø–≤–ª—è–µ—Ç—Å—è –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º |
| `USERS_LIST` | array | –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Ñ–æ—Ä—É–º–∞ |
| `PERSONAL_POSTS` | array | –°–ø–∏—Å–æ–∫ –ª–∏—á–Ω—ã—Ö –ø–æ—Å—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| `PLOT_POSTS` | array | –°–ø–∏—Å–æ–∫ —Å—é–∂–µ—Ç–Ω—ã—Ö –ø–æ—Å—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| `ADS_POSTS` | array | –°–ø–∏—Å–æ–∫ —Ä–µ–∫–ª–∞–º–Ω—ã—Ö –ø–æ—Å—Ç–æ–≤ |
| `FIRST_POST_FLAG` | boolean | –§–ª–∞–≥ –ø–æ–ª—É—á–µ–Ω–∏—è –ø–µ—Ä–≤–æ–≥–æ –ø–æ—Å—Ç–∞ |
| `FIRST_POST_MISSED_FLAG` | boolean | –§–ª–∞–≥ –ø—Ä–æ–ø—É—â–µ–Ω–Ω–æ–≥–æ –ø–µ—Ä–≤–æ–≥–æ –ø–æ—Å—Ç–∞ |
| `BANNER_RENO_FLAG` | boolean | –§–ª–∞–≥ –±–∞–Ω–Ω–µ—Ä–∞ –Ω–∞ –†–µ–Ω–æ |
| `BANNER_MAYAK_FLAG` | boolean | –§–ª–∞–≥ –±–∞–Ω–Ω–µ—Ä–∞ –Ω–∞ –ú–∞—è–∫–µ |
| `ALLOWED_PARENTS` | array | –†–∞–∑—Ä–µ—à—ë–Ω–Ω—ã–µ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–µ –¥–æ–º–µ–Ω—ã |
| `BASE_URL` | string | –ë–∞–∑–æ–≤—ã–π URL —Ñ–æ—Ä—É–º–∞ |

---

## 2. Full Data (–ü–æ–ª–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–π)

–ú–∞—Å—Å–∏–≤ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π —Å –ø–æ–ª–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –∏–∑ —Ñ–æ—Ä–º.

### –û–±—â–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ–ø–µ—Ä–∞—Ü–∏–∏

```json
{
  "title": "–ù–∞–∑–≤–∞–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏",
  "form_id": "form-income-plotpost",
  "type": "operation",
  "entries": [...],
  "price": 8,
  "bonus": 9,
  "amountLabel": "–°—É–º–º–∞"
}
```

### –ü–æ–ª—è –æ–ø–µ—Ä–∞—Ü–∏–∏

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|----------|
| `title` | string | –ù–∞–∑–≤–∞–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ |
| `form_id` | string | ID —Ñ–æ—Ä–º—ã (–±–µ–∑ #) |
| `type` | string | –¢–∏–ø: `"operation"`, `"discount"`, `"adjustment"` |
| `entries` | array | –ú–∞—Å—Å–∏–≤ –∑–∞–ø–∏—Å–µ–π –≤ –æ–ø–µ—Ä–∞—Ü–∏–∏ |
| `price` | number | –ë–∞–∑–æ–≤–∞—è —Ü–µ–Ω–∞ –∑–∞ –µ–¥–∏–Ω–∏—Ü—É |
| `bonus` | number | –ë–æ–Ω—É—Å –∑–∞ –µ–¥–∏–Ω–∏—Ü—É |
| `amountLabel` | string | –ù–∞–∑–≤–∞–Ω–∏–µ –ø–æ–ª—è —Å—É–º–º—ã |

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∑–∞–ø–∏—Å–∏ (entry)

```json
{
  "key": "form-income-plotpost_1",
  "data": {
    "plot_posts_json": "[...]",
    // –¥—Ä—É–≥–∏–µ –ø–æ–ª—è —Ñ–æ—Ä–º—ã
  },
  "multiplier": 3,
  "discount_amount": 10,
  "adjustment_amount": 20,
  "calculation": "(+ 20)"
}
```

---

## 3. –¢–∏–ø—ã –æ–ø–µ—Ä–∞—Ü–∏–π –∏ –∏—Ö JSON

### 3.1. –û–ø–µ—Ä–∞—Ü–∏–∏ —Å –ø–æ—Å—Ç–∞–º–∏ (–õ–∏—á–Ω—ã–µ/–°—é–∂–µ—Ç–Ω—ã–µ)

**–§–æ—Ä–º—ã:** `form-income-personalpost`, `form-income-plotpost`

```json
{
  "title": "–ö–∞–∂–¥—ã–π —Å—é–∂–µ—Ç–Ω—ã–π –ø–æ—Å—Ç",
  "form_id": "form-income-plotpost",
  "type": "operation",
  "entries": [
    {
      "key": "form-income-plotpost_1",
      "data": {
        "plot_posts_json": "[{\"src\":\"https://...\",\"text\":\"–ü–æ—Å—Ç 1\",\"symbols_num\":1500}]"
      },
      "multiplier": 1
    }
  ],
  "price": 8,
  "bonus": 9,
  "amountLabel": "–°—É–º–º–∞"
}
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- `data.plot_posts_json` –∏–ª–∏ `data.personal_posts_json` ‚Äî JSON-—Å—Ç—Ä–æ–∫–∞ —Å –º–∞—Å—Å–∏–≤–æ–º –ø–æ—Å—Ç–æ–≤
- –ö–∞–∂–¥—ã–π –ø–æ—Å—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç: `src`, `text`, `symbols_num`
- –£—á–∏—Ç—ã–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ—Å—Ç—ã —Å `symbols_num >= MIN_PLOT_POST_SYMBOLS` (50) –¥–ª—è —Å—é–∂–µ—Ç–Ω—ã—Ö
- –£—á–∏—Ç—ã–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ—Å—Ç—ã —Å `symbols_num >= MIN_PERSONAL_POST_SYMBOLS` (0) –¥–ª—è –ª–∏—á–Ω—ã—Ö

---

### 3.2. –ü–æ–¥–∞—Ä–∫–∏

**–§–æ—Ä–º—ã:** `form-gift-present`, `form-icon-present`, `form-badge-present`, `form-bg-present`, `form-gift-custom`

```json
{
  "title": "–ü–æ–¥–∞—Ä–æ–∫ –∏–∑ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ (#3)",
  "form_id": "form-gift-present",
  "type": "operation",
  "entries": [
    {
      "key": "form-gift-present_gift-3_1",
      "data": {
        "recipient_1": "456",
        "from_1": "–û—Ç —Ç–∞–π–Ω–æ–≥–æ –ø–æ–∫–ª–æ–Ω–Ω–∏–∫–∞",
        "wish_1": "–° –Ω–∞–∏–ª—É—á—à–∏–º–∏ –ø–æ–∂–µ–ª–∞–Ω–∏—è–º–∏!",
        "gift_id_1": "3",
        "gift_icon_1": "<i class='fas fa-gift'></i>"
      },
      "multiplier": 1
    }
  ],
  "price": 10,
  "bonus": 0,
  "amountLabel": "–°—É–º–º–∞"
}
```

**–ü–æ–ª—è –¥–∞–Ω–Ω—ã—Ö:**
- `recipient_N` ‚Äî ID –ø–æ–ª—É—á–∞—Ç–µ–ª—è
- `from_N` ‚Äî –û—Ç –∫–æ–≥–æ –ø–æ–¥–∞—Ä–æ–∫
- `wish_N` ‚Äî –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π/–ø–æ–∂–µ–ª–∞–Ω–∏–µ
- `gift_id_N` ‚Äî ID –ø–æ–¥–∞—Ä–∫–∞ –∏–∑ –∫–æ–ª–ª–µ–∫—Ü–∏–∏
- `gift_icon_N` ‚Äî HTML –∏–∫–æ–Ω–∫–∏ –ø–æ–¥–∞—Ä–∫–∞
- `gift_data_N` ‚Äî –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–¥–ª—è –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –ø–æ–¥–∞—Ä–∫–æ–≤)

---

### 3.3. –†–∞—Å—Ö–æ–¥—ã —Å –ø–æ–ª—É—á–∞—Ç–µ–ª—è–º–∏ (–ë–æ–Ω—É—Å—ã/–ú–∞—Å–∫–∏/–ë–∏–ª–µ—Ç—ã)

**–§–æ—Ä–º—ã:** `form-exp-bonus*`, `form-exp-mask`, `form-exp-clean`

```json
{
  "title": "–ë–æ–Ω—É—Å –Ω–∞ 1 –¥–µ–Ω—å √ó 1",
  "form_id": "form-exp-bonus1d1",
  "type": "operation",
  "entries": [
    {
      "key": "form-exp-bonus1d1_1",
      "data": {
        "recipient_1": "123",
        "quantity_1": "2",
        "from_1": "",
        "wish_1": ""
      },
      "multiplier": 1
    }
  ],
  "price": 5,
  "bonus": 0,
  "amountLabel": "–°—É–º–º–∞"
}
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- `recipient_N` ‚Äî ID –ø–æ–ª—É—á–∞—Ç–µ–ª—è
- `quantity_N` ‚Äî –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ
- –ï—Å–ª–∏ –ø–æ–ª—É—á–∞—Ç–µ–ª—å = —Ç–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, –ø–æ–ª—è `from_N` –∏ `wish_N` —Å–∫—Ä—ã—Ç—ã –∏ –ø—É—Å—Ç—ã

---

### 3.4. –í—ã–∫—É–ø—ã –ª–∏—Ü–∞/–ø–µ—Ä—Å–æ–Ω–∞–∂–∞

**–§–æ—Ä–º—ã:** `form-exp-face-*`, `form-exp-char-*`, `form-exp-face-own-*`

```json
{
  "title": "–í—ã–∫—É–ø –ª–∏—Ü–∞ –Ω–∞ 1 –º–µ—Å—è—Ü",
  "form_id": "form-exp-face-1m",
  "type": "operation",
  "entries": [
    {
      "key": "form-exp-face-1m_1",
      "data": {
        "face": "–ò–º—è –ê–∫—Ç—ë—Ä–∞",
        "char": "–ò–º—è –ü–µ—Ä—Å–æ–Ω–∞–∂–∞"
      },
      "multiplier": 1
    }
  ],
  "price": 15,
  "bonus": 0,
  "amountLabel": "–°—É–º–º–∞"
}
```

**–ü–æ–ª—è –¥–∞–Ω–Ω—ã—Ö:**
- `face` ‚Äî –ò–º—è –∞–∫—Ç—ë—Ä–∞/–ª–∏—Ü–∞
- `char` ‚Äî –ò–º—è –ø–µ—Ä—Å–æ–Ω–∞–∂–∞

---

### 3.5. –ü–µ—Ä–µ–≤–æ–¥—ã —Å—Ä–µ–¥—Å—Ç–≤

**–§–æ—Ä–º–∞:** `form-exp-transfer`

```json
{
  "title": "–ü–µ—Ä–µ–≤–æ–¥ —Å—Ä–µ–¥—Å—Ç–≤ –¥—Ä—É–≥–æ–º—É –∏–≥—Ä–æ–∫—É",
  "form_id": "form-exp-transfer",
  "type": "operation",
  "entries": [
    {
      "key": "form-exp-transfer_1",
      "data": {
        "recipient_1": "789",
        "amount_1": "100",
        "from_1": "–ò–º—è –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è",
        "wish_1": "–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π"
      },
      "multiplier": 1
    }
  ],
  "price": 0,
  "bonus": 0,
  "amountLabel": "–°—É–º–º–∞"
}
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- `amount_N` ‚Äî –°—É–º–º–∞ –ø–µ—Ä–µ–≤–æ–¥–∞
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –∫–æ–º–∏—Å—Å–∏—è 10%

---

### 3.6. –ê–¥–º–∏–Ω—Å–∫–∏–µ –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è (—Å —É–∫–∞–∑–∞–Ω–∏–µ–º —Å—É–º–º—ã)

**–§–æ—Ä–º—ã:** `form-income-topup`, `form-income-ams`

```json
{
  "title": "–î–æ–∫—É–ø–∏—Ç—å –∫—Ä–µ–¥–∏—Ç—ã",
  "form_id": "form-income-topup",
  "type": "operation",
  "entries": [
    {
      "key": "form-income-topup_1",
      "data": {
        "recipient_1": "123",
        "amount_1": "500",
        "wish_1": "–ü—Ä–∏—á–∏–Ω–∞ –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è"
      },
      "multiplier": 1
    }
  ],
  "price": 0,
  "bonus": 0,
  "amountLabel": "–°—É–º–º–∞"
}
```

**–ü–æ–ª—è –¥–∞–Ω–Ω—ã—Ö:**
- `recipient_N` ‚Äî ID –ø–æ–ª—É—á–∞—Ç–µ–ª—è
- `amount_N` ‚Äî –°—É–º–º–∞ –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è
- `wish_1` ‚Äî –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π (–æ–±—è–∑–∞—Ç–µ–ª–µ–Ω –¥–ª—è AMS)

---

### 3.7. –ê–¥–º–∏–Ω—Å–∫–∏–µ –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è (—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—É–º–º–∞)

**–§–æ—Ä–º—ã:** `form-income-anketa`, `form-income-akcion`, `form-income-needchar`, –∏ –¥—Ä.

```json
{
  "title": "–ü—Ä–∏–Ω—è—Ç–∏–µ –∞–Ω–∫–µ—Ç—ã",
  "form_id": "form-income-anketa",
  "type": "operation",
  "entries": [
    {
      "key": "form-income-anketa_1",
      "data": {
        "recipient_1": "123",
        "recipient_2": "456"
      },
      "multiplier": 2
    }
  ],
  "price": 1,
  "bonus": 0,
  "amountLabel": "–°—É–º–º–∞"
}
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ú–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ–ª—É—á–∞—Ç–µ–ª–µ–π (`recipient_1`, `recipient_2`, ...)
- `multiplier` —Ä–∞–≤–µ–Ω –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –ø–æ–ª—É—á–∞—Ç–µ–ª–µ–π

---

### 3.8. –ë–∞–Ω–Ω–µ—Ä—ã

**–§–æ—Ä–º—ã:** `form-income-banner-reno`, `form-income-banner-mayak`

```json
{
  "title": "–ë–∞–Ω–Ω–µ—Ä –Ω–∞ –†–µ–Ω–æ",
  "form_id": "form-income-banner-reno",
  "type": "operation",
  "entries": [
    {
      "key": "form-income-banner-reno_1",
      "data": {
        "link": "https://..."
      },
      "multiplier": 1
    }
  ],
  "price": 20,
  "bonus": 0,
  "amountLabel": "–°—É–º–º–∞"
}
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ù–∞—á–∏—Å–ª–µ–Ω–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑ (–ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ `BANNER_*_FLAG`)

---

### 3.9. –†–µ–∫–ª–∞–º–Ω—ã–π —Ñ–ª–∞–µ—Ä

**–§–æ—Ä–º–∞:** `form-income-flyer`

```json
{
  "title": "–†–µ–∫–ª–∞–º–Ω—ã–π —Ñ–ª–∞–µ—Ä",
  "form_id": "form-income-flyer",
  "type": "operation",
  "entries": [
    {
      "key": "form-income-flyer_1",
      "data": {
        "ads_posts_json": "[{\"src\":\"https://...\",\"text\":\"–ü–æ—Å—Ç 1\",\"symbols_num\":100}]"
      },
      "multiplier": 1
    }
  ],
  "price": 5,
  "bonus": 0,
  "amountLabel": "–°—É–º–º–∞"
}
```

---

### 3.10. RPG-—Ç–æ–ø

**–§–æ—Ä–º–∞:** `form-income-rpgtop`

```json
{
  "title": "–ì–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ –∑–∞ –ø—Ä–æ–µ–∫—Ç –Ω–∞ rpg-top",
  "form_id": "form-income-rpgtop",
  "type": "operation",
  "entries": [
    {
      "key": "form-income-rpgtop_1",
      "data": {
        "need": "https://..."
      },
      "multiplier": 1
    }
  ],
  "price": 1,
  "bonus": 0,
  "amountLabel": "–°—É–º–º–∞"
}
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –£—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –≥–æ–ª–æ—Å–∞ —Ä–∞–∑ –≤ –Ω–µ–¥–µ–ª—é
- `need` ‚Äî —Å—Å—ã–ª–∫–∞ –Ω–∞ —Å–∫—Ä–∏–Ω—à–æ—Ç –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è

---

### 3.11. –ü—Ä–æ—á–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (–¥–∏–∑–∞–π–Ω, –∫–æ–Ω–∫—É—Ä—Å—ã, –∏ —Ç.–¥.)

**–§–æ—Ä–º—ã:** `form-income-design-other`, `form-income-contest`, `form-income-run-contest`, –∏ –¥—Ä.

```json
{
  "title": "–ü—Ä–æ—á–∏–π –¥–∏–∑–∞–π–Ω",
  "form_id": "form-income-design-other",
  "type": "operation",
  "entries": [
    {
      "key": "form-income-design-other_1",
      "data": {
        "description": "–û–ø–∏—Å–∞–Ω–∏–µ —Ä–∞–±–æ—Ç—ã",
        "link": "https://..."
      },
      "multiplier": 1
    }
  ],
  "price": 10,
  "bonus": 0,
  "amountLabel": "–°—É–º–º–∞"
}
```

---

## 4. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∏ —Ü–µ–Ω (Adjustments)

–ü—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∫ –æ–ø–µ—Ä–∞—Ü–∏—è–º —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ –ø–æ–∫–∞–∑–∞—Ç–µ–ª—è–º–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ–¥–∞—Ä–∫–∏).

```json
{
  "title": "–ü–µ—Ä–µ—Å—á—ë—Ç –∑–∞ 5 –ø–æ–¥–∞—Ä–∫–æ–≤ –∏–∑ –∫–æ–ª–ª–µ–∫—Ü–∏–∏",
  "form_id": "price-adjustment",
  "type": "adjustment",
  "entries": [
    {
      "key": "price-adjustment_gift-collection-5-discount",
      "data": {
        "form": "#form-gift-present",
        "batch_size": 5,
        "new_price": 45,
        "adjustment_amount": 20,
        "calculation": "(+ 20)"
      },
      "multiplier": 1
    }
  ],
  "price": 0,
  "bonus": 0,
  "amountLabel": "–ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞"
}
```

**–§–æ—Ä–º—É–ª–∞ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∏:**
```
oldPrice √ó (itemCount √∑ batchSize) √ó batchSize - newPrice √ó (itemCount √∑ batchSize)
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ `itemCount >= batchSize`
- –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ –Ω–µ –º–æ–∂–µ—Ç –ø—Ä–µ–≤—ã—à–∞—Ç—å —Å—É–º–º—É –æ–ø–µ—Ä–∞—Ü–∏–∏
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–∞–∫ –¥–æ—Ö–æ–¥ (–∑–µ–ª—ë–Ω–∞—è, —Å +)

---

## 5. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Å–∫–∏–¥–∫–∏ (Discounts)

–ü—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∫ –æ–ø–µ—Ä–∞—Ü–∏—è–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–º –ø—Ä–∞–≤–∏–ª–∞–º.

```json
{
  "title": "75% —Å–∫–∏–¥–∫–∞ –Ω–∞ –ø–æ–¥–∞—Ä–∫–∏ –∏–∑ –∫–æ–ª–ª–µ–∫—Ü–∏–∏",
  "form_id": "automatic-discount",
  "type": "discount",
  "entries": [
    {
      "key": "automatic-discount_gift-collection-discount",
      "data": {
        "discount_id": "gift-collection-discount",
        "discount_title": "75% —Å–∫–∏–¥–∫–∞ –Ω–∞ –ø–æ–¥–∞—Ä–∫–∏ –∏–∑ –∫–æ–ª–ª–µ–∫—Ü–∏–∏",
        "discount_type": "percent",
        "total_items": 5,
        "discount_amount": 135,
        "calculation": "180 √ó 75%",
        "startDate": "2024-01-01",
        "expiresAt": "2025-12-31"
      },
      "multiplier": 1
    }
  ],
  "price": 0,
  "bonus": 0,
  "amountLabel": "–°–∫–∏–¥–∫–∞"
}
```

**–ü–æ–ª—è –¥–∞–Ω–Ω—ã—Ö —Å–∫–∏–¥–∫–∏:**
- `discount_id` ‚Äî —É–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –ø—Ä–∞–≤–∏–ª–∞ —Å–∫–∏–¥–∫–∏
- `discount_title` ‚Äî –Ω–∞–∑–≤–∞–Ω–∏–µ —Å–∫–∏–¥–∫–∏
- `discount_type` ‚Äî —Ç–∏–ø —Å–∫–∏–¥–∫–∏: `"percent"`, `"fixed"`, `"per_item"`, `"per_batch"`
- `total_items` ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤, –∫ –∫–æ—Ç–æ—Ä—ã–º –ø—Ä–∏–º–µ–Ω–µ–Ω–∞ —Å–∫–∏–¥–∫–∞
- `discount_amount` ‚Äî —Å—É–º–º–∞ —Å–∫–∏–¥–∫–∏
- `calculation` ‚Äî —Ñ–æ—Ä–º—É–ª–∞ —Ä–∞—Å—á—ë—Ç–∞ —Å–∫–∏–¥–∫–∏
- `startDate` ‚Äî –¥–∞—Ç–∞ –Ω–∞—á–∞–ª–∞ –¥–µ–π—Å—Ç–≤–∏—è —Å–∫–∏–¥–∫–∏ (—Ñ–æ—Ä–º–∞—Ç `YYYY-MM-DD`)
- `expiresAt` ‚Äî –¥–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è –¥–µ–π—Å—Ç–≤–∏—è —Å–∫–∏–¥–∫–∏ (—Ñ–æ—Ä–º–∞—Ç `YYYY-MM-DD` –∏–ª–∏ `null` –µ—Å–ª–∏ –±–µ—Å—Å—Ä–æ—á–Ω–æ)

**–¢–∏–ø—ã —Å–∫–∏–¥–æ–∫:**
- `"percent"` ‚Äî –ø—Ä–æ—Ü–µ–Ω—Ç–Ω–∞—è —Å–∫–∏–¥–∫–∞ (–∑–Ω–∞—á–µ–Ω–∏–µ –æ—Ç 0 –¥–æ 100)
- `"fixed"` ‚Äî —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–∫–∏–¥–∫–∞
- `"per_item"` ‚Äî —Å–∫–∏–¥–∫–∞ –∑–∞ –∫–∞–∂–¥—ã–π —ç–ª–µ–º–µ–Ω—Ç
- `"per_batch"` ‚Äî —Å–∫–∏–¥–∫–∞ –∑–∞ –∫–∞–∂–¥—É—é –ø–∞—Ä—Ç–∏—é —ç–ª–µ–º–µ–Ω—Ç–æ–≤

**–í—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- **`startDate`** (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û) ‚Äî –¥–∞—Ç–∞ –Ω–∞—á–∞–ª–∞ –¥–µ–π—Å—Ç–≤–∏—è —Å–∫–∏–¥–∫–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ `YYYY-MM-DD`
  - –°–∫–∏–¥–∫–∞ –Ω–∞—á–∏–Ω–∞–µ—Ç –¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å —Å 00:00:00 –ø–æ –º–æ—Å–∫–æ–≤—Å–∫–æ–º—É –≤—Ä–µ–º–µ–Ω–∏ (UTC+3)
  - –ï—Å–ª–∏ —Ç–µ–∫—É—â–µ–µ –º–æ—Å–∫–æ–≤—Å–∫–æ–µ –≤—Ä–µ–º—è < startDate, —Å–∫–∏–¥–∫–∞ –Ω–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è
  - –ü—Ä–∏–º–µ—Ä: `"startDate": "2025-01-15"` ‚Äî —Å–∫–∏–¥–∫–∞ –Ω–∞—á–Ω—ë—Ç —Ä–∞–±–æ—Ç–∞—Ç—å 15 —è–Ω–≤–∞—Ä—è 2025 –≤ 00:00 –ú–°–ö
- **`expiresAt`** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) ‚Äî –¥–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è –¥–µ–π—Å—Ç–≤–∏—è —Å–∫–∏–¥–∫–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ `YYYY-MM-DD`
  - –°–∫–∏–¥–∫–∞ –¥–µ–π—Å—Ç–≤—É–µ—Ç –¥–æ –∫–æ–Ω—Ü–∞ –¥–Ω—è (23:59:59) –ø–æ –º–æ—Å–∫–æ–≤—Å–∫–æ–º—É –≤—Ä–µ–º–µ–Ω–∏
  - –ï—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω–æ ‚Äî —Å–∫–∏–¥–∫–∞ –¥–µ–π—Å—Ç–≤—É–µ—Ç –±–µ—Å—Å—Ä–æ—á–Ω–æ
  - –ü—Ä–∏–º–µ—Ä: `"expiresAt": "2025-01-31"` ‚Äî —Å–∫–∏–¥–∫–∞ –∏—Å—Ç–µ–∫–∞–µ—Ç 31 —è–Ω–≤–∞—Ä—è 2025 –≤ 23:59:59 –ú–°–ö

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –°–∫–∏–¥–∫–∏ —Å—á–∏—Ç–∞—é—Ç—Å—è –æ—Ç —Å—É–º–º—ã —Å —É—á—ë—Ç–æ–º –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–æ–∫
- –ï—Å–ª–∏ `type === "percent"` –∏ `value > 100`, –∑–Ω–∞—á–µ–Ω–∏–µ –ø—Ä–∏–≤–æ–¥–∏—Ç—Å—è –∫ 100
- –°–∫–∏–¥–∫–∞ –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –Ω–µ –º–æ–∂–µ—Ç –ø—Ä–µ–≤—ã—à–∞—Ç—å —Å—É–º–º—É —ç—Ç–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- –û–±—â–∞—è —Å—É–º–º–∞ —Å–∫–∏–¥–æ–∫ –Ω–µ –º–æ–∂–µ—Ç –ø—Ä–µ–≤—ã—à–∞—Ç—å –∏—Ç–æ–≥–æ–≤—É—é —Å—É–º–º—É –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- –ü—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –≤—Å–µ —Å–∫–∏–¥–∫–∏ –ø—Ä–æ–ø–æ—Ä—Ü–∏–æ–Ω–∞–ª—å–Ω–æ —É–º–µ–Ω—å—à–∞—é—Ç—Å—è
- –ï—Å–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ `startDate`, —Å–∫–∏–¥–∫–∞ –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç—Å—è —Å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ–º –≤ –∫–æ–Ω—Å–æ–ª–∏

---

## 6. –ü—Ä–∏–º–µ—Ä –ø–æ–ª–Ω–æ–≥–æ JSON

```json
{
  "type": "PURCHASE",
  "totalSum": 150,
  "environment": {
    "USER_ID": "123",
    "USER_NAME": "–ò–≥—Ä–æ–∫",
    "IS_ADMIN": false
  },
  "fullData": [
    {
      "title": "–ö–∞–∂–¥—ã–π —Å—é–∂–µ—Ç–Ω—ã–π –ø–æ—Å—Ç",
      "form_id": "form-income-plotpost",
      "type": "operation",
      "entries": [
        {
          "key": "form-income-plotpost_1",
          "data": {
            "plot_posts_json": "[{\"src\":\"https://...\",\"text\":\"–ü–æ—Å—Ç\",\"symbols_num\":1500}]"
          },
          "multiplier": 1
        }
      ],
      "price": 8,
      "bonus": 9,
      "amountLabel": "–°—É–º–º–∞"
    },
    {
      "title": "–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ —Ü–µ–Ω",
      "form_id": "price-adjustment",
      "type": "adjustment",
      "entries": [
        {
          "key": "price-adjustment_plot-5-discount",
          "data": {
            "adjustment_amount": 20,
            "calculation": "(+ 20)"
          }
        }
      ],
      "amountLabel": "–ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞"
    },
    {
      "title": "75% —Å–∫–∏–¥–∫–∞ –Ω–∞ —Å—é–∂–µ—Ç–Ω—ã–µ –ø–æ—Å—Ç—ã",
      "form_id": "automatic-discount",
      "type": "discount",
      "entries": [
        {
          "key": "automatic-discount_plot-discount",
          "data": {
            "discount_amount": 30,
            "calculation": "(+ 30)"
          }
        }
      ],
      "amountLabel": "–°–∫–∏–¥–∫–∞"
    }
  ],
  "operations": [...]
}
```

---

## –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

1. **–ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –æ–ø–µ—Ä–∞—Ü–∏–π:** –û–ø–µ—Ä–∞—Ü–∏–∏ –≥—Ä—É–ø–ø–∏—Ä—É—é—Ç—Å—è –ø–æ –∫–ª—é—á—É (`key`), –∫–æ—Ç–æ—Ä—ã–π —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –∏–∑ `form_id` –∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, ID –ø–æ–¥–∞—Ä–∫–∞)

2. **–ú–Ω–æ–∂–∏—Ç–µ–ª—å (multiplier):** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ–ø–µ—Ä–∞—Ü–∏–π —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ –ø–æ–∫–∞–∑–∞—Ç–µ–ª—è–º–∏ (–ø–æ—Å—Ç—ã, –ø–æ–ª—É—á–∞—Ç–µ–ª–∏)

3. **–ü–æ—Ä—è–¥–æ–∫ –æ–ø–µ—Ä–∞—Ü–∏–π:**
   - –û–±—ã—á–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (type: "operation")
   - –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∏ —Ü–µ–Ω (type: "adjustment")
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Å–∫–∏–¥–∫–∏ (type: "discount")

4. **JSON –≤ —Å—Ç—Ä–æ–∫–∞—Ö:** –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –ø–æ–ª—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, `plot_posts_json`) —Å–æ–¥–µ—Ä–∂–∞—Ç JSON –∫–∞–∫ —Å—Ç—Ä–æ–∫—É –∏ —Ç—Ä–µ–±—É—é—Ç –ø–∞—Ä—Å–∏–Ω–≥–∞

5. **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:** –ü–æ–ª–µ `operations` —Å–æ–¥–µ—Ä–∂–∏—Ç —Å—Ç–∞—Ä—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏

---

## –ü—Ä–∏–º–µ—Ä –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –∏–∑ backup

### –¢–µ—Å—Ç–æ–≤—ã–π –ø—Ä–∏–º–µ—Ä

```javascript
// –ü—Ä–∏–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
window.BACKUP_DATA = {
  "fullData": [
    {
      "title": "–ö–∞–∂–¥—ã–π —Å—é–∂–µ—Ç–Ω—ã–π –ø–æ—Å—Ç",
      "form_id": "form-income-plotpost",
      "type": "operation",
      "entries": [
        {
          "key": "form-income-plotpost_1",
          "data": {
            "plot_posts_json": "[{\"src\":\"https://example.com/post1\",\"text\":\"–ü–æ—Å—Ç 1\",\"symbols_num\":1500}]"
          },
          "multiplier": 1
        }
      ],
      "price": 8,
      "bonus": 9,
      "amountLabel": "–°—É–º–º–∞"
    },
    {
      "title": "–ü–æ–¥–∞—Ä–æ–∫ –∏–∑ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ (#3)",
      "form_id": "form-gift-present",
      "type": "operation",
      "entries": [
        {
          "key": "form-gift-present_gift-3_1",
          "data": {
            "recipient_1": "456",
            "from_1": "–û—Ç —Ç–∞–π–Ω–æ–≥–æ –ø–æ–∫–ª–æ–Ω–Ω–∏–∫–∞",
            "wish_1": "–° –Ω–∞–∏–ª—É—á—à–∏–º–∏ –ø–æ–∂–µ–ª–∞–Ω–∏—è–º–∏!",
            "gift_id_1": "3",
            "gift_icon_1": "<i class='fas fa-gift'></i>"
          },
          "multiplier": 1
        }
      ],
      "price": 10,
      "bonus": 0,
      "amountLabel": "–°—É–º–º–∞"
    }
  ],
  "totalSum": 150
};
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–Ω—Å–æ–ª–∏

1. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞
2. –í—Å—Ç–∞–≤—å—Ç–µ –∫–æ–¥ –≤—ã—à–µ
3. –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É (F5)
4. –ü–æ—è–≤–∏—Ç—Å—è –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –≤–æ–ø—Ä–æ—Å–æ–º –æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏
5. –ù–∞–∂–º–∏—Ç–µ "–î–∞" –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

–ü–æ—Å–ª–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è:
- –í –ª–æ–≥–µ –ø–æ—è–≤—è—Ç—Å—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∏ –∏ —Å–∫–∏–¥–∫–∏ –ø–µ—Ä–µ—Å—á–∏—Ç–∞—é—Ç—Å—è
- `window.BACKUP_DATA` –±—É–¥–µ—Ç –æ—á–∏—â–µ–Ω
- –í –∫–æ–Ω—Å–æ–ª–∏ –ø–æ—è–≤–∏—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ: "–û–ø–µ—Ä–∞—Ü–∏–∏ —É—Å–ø–µ—à–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –∏–∑ backup"

---

## –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –∫—É–ø–æ–Ω—ã

–°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –∫—É–ø–æ–Ω—ã, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –ø—Ä–∏–º–µ–Ω—è—Ç—å –∫ —Å–≤–æ–∏–º –æ–ø–µ—Ä–∞—Ü–∏—è–º.

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫—É–ø–æ–Ω–æ–≤

–ö—É–ø–æ–Ω—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∏–∑ `window.PERSONAL_DISCOUNTS` –≤ —Å–ª–µ–¥—É—é—â–µ–º —Ñ–æ—Ä–º–∞—Ç–µ:

```javascript
window.PERSONAL_DISCOUNTS = [
  {
    id: "coupon-1",
    type: "item",      // —Ç–∏–ø –∫—É–ø–æ–Ω–∞: "item", "fixed", "percent"
    form: "form-gift-present",  // ID —Ñ–æ—Ä–º—ã –±–µ–∑ #
    value: 2,          // –∑–Ω–∞—á–µ–Ω–∏–µ (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–ª—è item, —Å—É–º–º–∞ –¥–ª—è fixed, –ø—Ä–æ—Ü–µ–Ω—Ç –¥–ª—è percent)
    title: "–°–∫–∏–¥–∫–∞ –Ω–∞ 2 –ø–æ–¥–∞—Ä–∫–∞",
    html: "<div>HTML –±–ª–æ–∫ –∫—É–ø–æ–Ω–∞ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è</div>",
    expiresAt: "2025-12-31T23:59:59+03:00"  // –¥–∞—Ç–∞ –∏—Å—Ç–µ—á–µ–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
  }
];
```

### –¢–∏–ø—ã –∫—É–ø–æ–Ω–æ–≤

#### 1. Item (–∫–æ–ª–∏—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–π)
- –ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∑–∞ –∫–∞–∂–¥—ã–µ N —Ç–æ–≤–∞—Ä–æ–≤/–ø–æ–ª—É—á–∞—Ç–µ–ª–µ–π
- –°–∫–∏–¥–∫–∞ = `price √ó value`
- –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫—É–ø–æ–Ω–æ–≤ —Ç–∏–ø–∞ item –¥–ª—è –æ–¥–Ω–æ–π —Ñ–æ—Ä–º—ã
- –ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è **–î–û** –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–æ–∫

#### 2. Fixed (—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—É–º–º–∞)
- –ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫–∞–∫ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–∫–∏–¥–∫–∞
- –°–∫–∏–¥–∫–∞ –Ω–µ –º–æ–∂–µ—Ç –ø—Ä–µ–≤—ã—Å–∏—Ç—å –æ—Å—Ç–∞–≤—à—É—é—Å—è —Å—Ç–æ–∏–º–æ—Å—Ç—å
- –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫—É–ø–æ–Ω–æ–≤ —Ç–∏–ø–∞ fixed –¥–ª—è –æ–¥–Ω–æ–π —Ñ–æ—Ä–º—ã
- –ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è **–ü–û–°–õ–ï** –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–æ–∫

#### 3. Percent (–ø—Ä–æ—Ü–µ–Ω—Ç–Ω–∞—è —Å–∫–∏–¥–∫–∞)
- –ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫–∞–∫ –ø—Ä–æ—Ü–µ–Ω—Ç –æ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏
- –û–∫—Ä—É–≥–ª–µ–Ω–∏–µ –≤–≤–µ—Ä—Ö: `Math.ceil(cost √ó percent / 100)`
- **–û–ì–†–ê–ù–ò–ß–ï–ù–ò–ï**: –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –û–î–ò–ù –∫—É–ø–æ–Ω —Ç–∏–ø–∞ percent –¥–ª—è –æ–¥–Ω–æ–π —Ñ–æ—Ä–º—ã
- –ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è **–ü–û–°–õ–ï** –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–æ–∫ –∏ fixed –∫—É–ø–æ–Ω–æ–≤

### –ü–æ—Ä—è–¥–æ–∫ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è

–ö—É–ø–æ–Ω—ã –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –≤ —Å—Ç—Ä–æ–≥–æ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ:

```
1. –û–ø–µ—Ä–∞—Ü–∏–∏ (–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –∫–æ—Ä–∑–∏–Ω—É)
   ‚Üì
2. –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –∫—É–ø–æ–Ω—ã —Ç–∏–ø–∞ "item"
   ‚Üì
3. –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∏ —Ü–µ–Ω (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ)
   ‚Üì
4. –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –∫—É–ø–æ–Ω—ã —Ç–∏–ø–∞ "fixed"
   ‚Üì
5. –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –∫—É–ø–æ–Ω—ã —Ç–∏–ø–∞ "percent"
   ‚Üì
6. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Å–∫–∏–¥–∫–∏
```

### –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∫—É–ø–æ–Ω–æ–≤

–î–ª—è –æ–¥–Ω–æ–π —Ñ–æ—Ä–º—ã –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:
- ‚úÖ –ù–µ—Å–∫–æ–ª—å–∫–æ –∫—É–ø–æ–Ω–æ–≤ —Ç–∏–ø–∞ **item**
- ‚úÖ –ù–µ—Å–∫–æ–ª—å–∫–æ –∫—É–ø–æ–Ω–æ–≤ —Ç–∏–ø–∞ **fixed**
- ‚úÖ **–ù–ï –ë–û–õ–ï–ï –û–î–ù–û–ì–û** –∫—É–ø–æ–Ω–∞ —Ç–∏–ø–∞ **percent**
- ‚úÖ –ö–æ–º–±–∏–Ω–∞—Ü–∏—é: item + fixed + percent (–æ–¥–∏–Ω)

### –í–∞–ª–∏–¥–∞—Ü–∏—è

–ü—Ä–∏ –≤—ã–±–æ—Ä–µ –∫—É–ø–æ–Ω–æ–≤ —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:

1. **–î–ª—è item –∫—É–ø–æ–Ω–æ–≤:**
   - –ù–∞–ª–∏—á–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–π –Ω—É–∂–Ω–æ–π —Ñ–æ—Ä–º—ã –≤ –∫–æ—Ä–∑–∏–Ω–µ
   - –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–∑–∏—Ü–∏–π: `itemsInCart >= coupon.value`

2. **–î–ª—è fixed –∫—É–ø–æ–Ω–æ–≤:**
   - –ù–∞–ª–∏—á–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–π –Ω—É–∂–Ω–æ–π —Ñ–æ—Ä–º—ã –≤ –∫–æ—Ä–∑–∏–Ω–µ
   - –î–æ—Å—Ç–∞—Ç–æ—á–Ω–∞—è —Å—É–º–º–∞: `costInCart >= coupon.value`

3. **–î–ª—è percent –∫—É–ø–æ–Ω–æ–≤:**
   - –ù–∞–ª–∏—á–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–π –Ω—É–∂–Ω–æ–π —Ñ–æ—Ä–º—ã –≤ –∫–æ—Ä–∑–∏–Ω–µ
   - –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –¥—Ä—É–≥–∏—Ö –ø—Ä–æ—Ü–µ–Ω—Ç–Ω—ã—Ö –∫—É–ø–æ–Ω–æ–≤ –¥–ª—è —Ç–æ–π –∂–µ —Ñ–æ—Ä–º—ã

### –ü—Ä–∏–º–µ—Ä —Ä–∞—Å—á—ë—Ç–∞

**–ò—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
- 7 –ø–æ–¥–∞—Ä–∫–æ–≤ –∏–∑ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ (40‚Ç≤ –∫–∞–∂–¥—ã–π) = 280‚Ç≤
- –ö—É–ø–æ–Ω item: —Å–∫–∏–¥–∫–∞ –Ω–∞ 2 –ø–æ–¥–∞—Ä–∫–∞
- –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞: 5 –ø–æ–¥–∞—Ä–∫–æ–≤ –∑–∞ 180‚Ç≤ –≤–º–µ—Å—Ç–æ 200‚Ç≤
- –ö—É–ø–æ–Ω fixed: 15‚Ç≤
- –ö—É–ø–æ–Ω percent: 10%

**–†–∞—Å—á—ë—Ç:**
```
1. –ë–∞–∑–æ–≤–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å:        40‚Ç≤ √ó 7 = 280‚Ç≤
2. Item –∫—É–ø–æ–Ω:               -80‚Ç≤ (40‚Ç≤ √ó 2)
                             = 200‚Ç≤
3. –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞:            -20‚Ç≤ (40√ó1√ó5 - 180√ó1)
                             = 180‚Ç≤
4. Fixed –∫—É–ø–æ–Ω:              -15‚Ç≤
                             = 165‚Ç≤
5. Percent –∫—É–ø–æ–Ω (10%):      -17‚Ç≤ (ceil(165 √ó 0.1))
                             = 148‚Ç≤
```

### UI –∫—É–ø–æ–Ω–æ–≤

–ö—É–ø–æ–Ω—ã –¥–æ—Å—Ç—É–ø–Ω—ã —á–µ—Ä–µ–∑ –±–ª–æ–∫ "–ö—É–ø–æ–Ω—ã" –≤ —Ä–∞–∑–¥–µ–ª–µ "–ü–æ—Ç—Ä–∞—Ç–∏—Ç—å":
- –ò–∫–æ–Ω–∫–∞: üéüÔ∏è
- –ü—Ä–∏ –∫–ª–∏–∫–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –¥–æ—Å—Ç—É–ø–Ω—ã–º–∏ –∫—É–ø–æ–Ω–∞–º–∏
- –ü–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –æ—à–∏–±–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫—É–ø–æ–Ω–∞
- –ö–Ω–æ–ø–∫–∞ "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å" –∞–∫—Ç–∏–≤–Ω–∞ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–º –≤—ã–±–æ—Ä–µ

### –ò—Å—Ç–µ—á–µ–Ω–∏–µ –∫—É–ø–æ–Ω–æ–≤

- –ö—É–ø–æ–Ω—ã —Å `expiresAt` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ñ–∏–ª—å—Ç—Ä—É—é—Ç—Å—è
- –ü–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã–µ –∫—É–ø–æ–Ω—ã (—Ç–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è < expiresAt)
- –í—Ä–µ–º—è —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç—Å—è –≤ –º–æ—Å–∫–æ–≤—Å–∫–æ–º —á–∞—Å–æ–≤–æ–º –ø–æ—è—Å–µ (UTC+3)
